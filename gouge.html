<html>
    <head>
        <title>Gouge</title>
        <meta charset="utf-8" />
        <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    </head>
    <body>
        Set
        <button py-click="set_profile()" id="s-prof" class="py-button">Profile</button>
        <button py-click="set_plan()" id="s-plan" class="py-button">Plan</button>
        <button py-click="set_end()" id="s-end" class="py-button">End</button>
        view
        <section class="pyscript">
            <div id="mpl"></div>
<py-tutor>
<py-config>
    packages = [
      "matplotlib",
      "scipy"
    ]
    "fetch" = [ { "files" = [
            "./gouge.py",
            "./plotter.py",
            "./jig.py",
            "./util.py" ] }
    ]
    plugins = [
      "https://pyscript.net/latest/plugins/python/py_tutor.py"
    ]
</py-config>
<py-script>
import matplotlib.pyplot as plt

from gouge import Gouge
from plotter import Plotter

# Build gouge model and solve
gouge = Gouge()
gouge.set_channel_parabola()
gouge.set_profile_flat()
gouge.solve()

# Draw picture...
fig = plt.figure(layout="constrained")
plotter = Plotter(fig=fig, gouge=gouge, view="profile")
show()

def set_profile():
    print("Setting profile view")
    plotter.view='profile'
    show()

def set_plan():
    print("Setting plan view")
    plotter.view='plan'
    show()

def set_end():
    print("Setting end view")
    plotter.view='end'
    show()

def show():
    plotter.make_plot()
    plt.show()
    display(fig, target="mpl", append=False)

</py-script>
</py-tutor>
        </section>
    </body>
</html>
